set(CMAKE_CXX_STANDARD 11)
cmake_minimum_required(VERSION 3.11)

execute_process(COMMAND which nvcc OUTPUT_VARIABLE has_nvcc)
if(has_nvcc STREQUAL "")
    execute_process(COMMAND which hipcc OUTPUT_VARIABLE has_hipcc)
    if(has_hipcc STREQUAL "")
        project(qsim)
    else()
        project(qsim LANGUAGES CXX HIP)
        ADD_SUBDIRECTORY(pybind_interface/hip)
    endif()
else()
    project(qsim LANGUAGES CXX CUDA)
    ADD_SUBDIRECTORY(pybind_interface/cuda)
    if(DEFINED ENV{CUQUANTUM_ROOT})
        ADD_SUBDIRECTORY(pybind_interface/custatevec)
    endif()
endif()

ADD_SUBDIRECTORY(pybind_interface/sse)
ADD_SUBDIRECTORY(pybind_interface/avx512)
ADD_SUBDIRECTORY(pybind_interface/avx2)
ADD_SUBDIRECTORY(pybind_interface/basic)
ADD_SUBDIRECTORY(pybind_interface/decide)
